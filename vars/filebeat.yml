filebeat_config:
############################# Filebeat #####################################
  filebeat:
    prospectors:
      -
        paths:
          - "{{ logs_base_path }}/*.json"
        fields:
          logzio_codec: json
          token: "{{logzio_token}}"
          type: ec2
          environment: "{{ ssm_environment_value | default('dev')}}"
          domain: "{{ssm_domain_value | default('test')}}"
          service: "{{ssm_service_value | default('test')}}"
        fields_under_root: true
        encoding: utf-8
        ignore_older: 3h
        json.add_error_key: true
        json.keys_under_root: true
        processors:
        - add_cloud_metadata: ~

    registry_file: /var/lib/filebeat/registry

############################# Output ##########################################
  output:
    logstash:
      hosts: ["{{logstash_proxy_url}}"]

#  The below configuration is used for Filebeat 5.0 or higher
      ssl:
        certificate_authorities: ["{{ filebeat_ca_path }}"]
#================================ Logging ======================================
  logging.level: error
  logging.metrics.enabled: true
  logging.metrics.period: 30s
  logging.to_files: true
  logging.files:
    path: /var/log/filebeat
    name: filebeat.log
    rotateeverybytes: 10485760 # = 10MB
    keepfiles: 50
    permissions: 0600
  logging.json: true